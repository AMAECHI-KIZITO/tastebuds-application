{%extends "userindex.html"%}


{%block title%}
TasteBuds - Restaurants
{%endblock title%}

{%block extra_media_query%}
@media screen and (max-width:375px){

}
{%endblock%}


{%block content%}
<div class="row" style='background-color:#704e2e'>
    
    <div class="col-md-4 offset-md-4 pt-3">
        <img class="img-fluid img-thumbnail col-6 offset-3" src="{{url_for("bpuser.static",filename='rest_imgs/'+ rest_info.rest_img)}}" width="350px" height="350px">
    </div>
    <div class="col-12" style="font-family:'lucida-calligraphy'; font-weight:bolder; color:#FFF4C2">
        <h6>Name: {{rest_info.rest_name}}</h6>
        <h6>Address: {{rest_info.rest_address}}</h6>
        <h6>Contact: {{rest_info.rest_phone}}</h6>
    </div>
    
</div><br>

<!--maindish-->
<div class="row pb-2" id="maindish">
    {%if rest_maindish!=[]%}
        <h4 style='font-weight:bolder;'>Main Dish</h4>
        {%for x in rest_maindish%}
        <div class="col-2">
            <img class="img-fluid prod_imgs" src="{{url_for('bpuser.static',filename='rest_prod_imgs/'+ x.prod_image)}}" width="200px" height="200px">
        </div>
        <div class="col-10 mb-5">
            <div class="row">
                <div class="col-12">
                    <h6>{{x.prod_name}}</h6>
                    <h6>&#8358 {{"{:,.0f}".format(x.prod_price)}}</h6>
                    {#<button type="button" id="shopcart" class="btn btn-warning btn-sm float-end" data-bs-toggle="modal" data-bs-target="#foodMaindish{{x.prod_id}}">Order</button>#}
                    <button type="button" id="shopcart" class="btn text-light btn-sm float-end" data-bs-toggle="modal" data-bs-target="#foodMaindish{{x.prod_id}}" style='background-color:#704e2e'>Order</button>
                </div>
            </div>
        </div><hr>
        {%endfor%}
    {%endif%}
</div>

<!--swallow-->
<div class="row" id="swallow">
    {%if swallow!=[]%}
        <h4 style='font-weight:bolder;'>Swallow</h4>
        {%for x in swallow%}
        <div class="col-2">
            <img class="img-fluid prod_imgs" src="{{url_for('bpuser.static',filename='rest_prod_imgs/'+ x.prod_image)}}" width="200px" height="200px">
        </div>
        <div class="col-10 mb-5">
            <div class="row">
                <div class="col-12">
                    <h6>{{x.prod_name}}</h6>
                    <h6>&#8358 {{"{:,.0f}".format(x.prod_price)}}</h6>
                    <button type="button" id="shopcart" class="btn text-light btn-sm float-end" data-bs-toggle="modal" data-bs-target="#foodSwallow{{x.prod_id}}" style='background-color:#704e2e'>Order</button>
                </div>
            </div>
        </div><hr>
        {%endfor%}
    {%endif%}
</div>

<!--soup-->
<div class="row" id="soups">
    {%if soup!=[]%}
        <h4 style='font-weight:bolder;'>Soups</h4>
        {%for x in soup%}
        <div class="col-2">
            <img class="img-fluid prod_imgs" src="{{url_for('bpuser.static',filename='rest_prod_imgs/'+ x.prod_image)}}" width="200px" height="200px">
        </div>
        <div class="col-10 mb-5">
            <div class="row">
                <div class="col-12">
                    <h6>{{x.prod_name}}</h6>
                    <h6>&#8358 {{"{:,.0f}".format(x.prod_price)}}</h6>
                    <button type="button" id="shopcart" class="btn text-light btn-sm float-end" data-bs-toggle="modal" data-bs-target="#foodSoup{{x.prod_id}}" style='background-color:#704e2e'>Order</button>
                </div>
            </div>
        </div><hr>
        {%endfor%}
    {%endif%}
</div>

<!--protein-->
<div class="row" id="protein">
    {%if protein!=[]%}
        <h4 style='font-weight:bolder;'>Proteins</h4>
        {%for x in protein%}
        <div class="col-2">
            <img class="img-fluid prod_imgs" src="{{url_for('bpuser.static',filename='rest_prod_imgs/'+ x.prod_image)}}" width="200px" height="200px">
        </div>
        <div class="col-10 mb-5">
            <div class="row">
                <div class="col-12">
                    <h6>{{x.prod_name}}</h6>
                    <h6>&#8358 {{"{:,.0f}".format(x.prod_price)}}</h6>
                    <button type="button" id="shopcart" class="btn text-light btn-sm float-end" data-bs-toggle="modal" data-bs-target="#foodProtein{{x.prod_id}}" style='background-color:#704e2e'>Order</button>
                </div>
            </div>
        </div><hr>
        {%endfor%}
    {%endif%}
</div>

<!--dessert-->
<div class="row" id="desserts_and_pastries">
    {%if desserts!=[]%}
        <h4 style='font-weight:bolder;'>Desserts and Pasteries</h4>
        {%for x in desserts%}
        <div class="col-2">
            <img class="img-fluid prod_imgs" src="{{url_for('bpuser.static',filename='rest_prod_imgs/'+ x.prod_image)}}" width="200px" height="200px">
        </div>
        <div class="col-10 mb-5">
            <div class="row">
                <div class="col-12">
                    <h6>{{x.prod_name}}</h6>
                    <h6>&#8358 {{"{:,.0f}".format(x.prod_price)}}</h6>
                    <button type="button" id="shopcart" class="btn text-light btn-sm float-end" data-bs-toggle="modal" data-bs-target="#foodDesserts{{x.prod_id}}" style='background-color:#704e2e'>Order</button>
                </div>
            </div>
        </div><hr>
        {%endfor%}
    {%endif%}
</div>

<!--bread-->
<div class="row" id="bread">
    {%if bread!=[]%}
        <h4 style='font-weight:bolder;'>Bread</h4>
        {%for x in bread%}
        <div class="col-2">
            <img class="img-fluid prod_imgs" src="{{url_for('bpuser.static',filename='rest_prod_imgs/'+ x.prod_image)}}" width="200px" height="200px">
        </div>
        <div class="col-10 mb-5">
            <div class="row">
                <div class="col-12">
                    <h6>{{x.prod_name}}</h6>
                    <h6>&#8358 {{"{:,.0f}".format(x.prod_price)}}</h6>
                    <button type="button" id="shopcart" class="btn text-light btn-sm float-end" data-bs-toggle="modal" data-bs-target="#foodBread{{x.prod_id}}" style='background-color:#704e2e'>Order</button>
                </div>
            </div>
        </div><hr>
        {%endfor%}
    {%endif%}
</div>

<!--salad-->
<div class="row" id="salad">
    {%if salad!=[]%}
        <h4 style='font-weight:bolder;'>Salads</h4>
        {%for x in salad%}
        <div class="col-2">
            <img class="img-fluid prod_imgs" src="{{url_for('bpuser.static',filename='rest_prod_imgs/'+ x.prod_image)}}" width="200px" height="200px">
        </div>
        <div class="col-10 mb-5">
            <div class="row">
                <div class="col-12">
                    <h6>{{x.prod_name}}</h6>
                    <h6>&#8358 {{"{:,.0f}".format(x.prod_price)}}</h6>
                    <button type="button" id="shopcart" class="btn text-light btn-sm float-end" data-bs-toggle="modal" data-bs-target="#foodSalad{{x.prod_id}}" style='background-color:#704e2e'>Order</button>
                </div>
            </div>
        </div><hr>
        {%endfor%}
    {%endif%}
</div>

<!--drinks-->
<div class="row" id="drinks">
    {%if drink != []%}
        <h4 style='font-weight:bolder;'>Drinks</h4>
        {%for x in drink%}
        <div class="col-2">
            <img class="img-fluid prod_imgs" src="{{url_for('bpuser.static',filename='rest_prod_imgs/'+ x.prod_image)}}" width="200px" height="200px">
        </div>
        <div class="col-10 mb-5">
            <div class="row">
                <div class="col-12">
                    <h6>{{x.prod_name}}</h6>
                    <h6>&#8358 {{"{:,.0f}".format(x.prod_price)}}</h6>
                    <button type="button" id="shopcart" class="btn text-light btn-sm float-end" data-bs-toggle="modal" data-bs-target="#foodDrinks{{x.prod_id}}" style='background-color:#704e2e'>Order</button>
                </div>
            </div>
        </div><hr>
        {%endfor%}
    {%endif%}
</div>
{%endblock content%}





{% block foodProductsModal %}

<!--Maindish Modal-->
{% for x in rest_maindish%}
<div class="modal fade" id="foodMaindish{{x.prod_id}}" tabindex="-1" aria-labelledby="Products" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md">
        <div class="modal-content" id="content_modal">

            <!--modal header-->
            <div class="modal-header">
                <h5 modal-dialog-scrollable id="Products">{{x.prod_name}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!--modal body-->
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-12 text-center">
                            <p>{{x.prod_description}}</p>
                            <p id='feedback{{x.prod_id}}'></p>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col">
                            <h6>Quantity</h6>
                            <button type='button' class='btn btn-success btn-sm' onclick='addition{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-plus'></i></span>
                            </button> 

                            <span id='quantity{{x.prod_id}}'>1</span> 
                            
                            <button type='button' class='btn btn-danger btn-sm' onclick='substract{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-minus'></i></span>
                            </button><br><br>

                            <input type='hidden' id='number_plates{{x.prod_id}}' class='form-control'  value=1>
                            <input type='hidden' id='foodprice{{x.prod_id}}' class='form-control' value='{{x.prod_price}}'>

                            <button type='button' class='btn btn-success btn-sm float-end d-none' id='addtocart{{x.prod_id}}'>
                                Add into cart
                            </button>

                            <button type='button' class='btn btn-success btn-sm float-end' id='insertToCart{{x.prod_id}}'>
                                Add To Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!--modal footer-->
            <div class="modal-footer">
                <div class="row mb-2">
                    <label class='col-md-5'><b>Total(&#8358;)</b></label>
                    <div class='col-md-7'>
                        <input type='number' id='total{{x.prod_id}}' class='form-control' value='{{x.prod_price}}' style="border:none" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}



<!--Swallow modal-->
{% for x in swallow%}
<div class="modal fade" id="foodSwallow{{x.prod_id}}" tabindex="-1" aria-labelledby="Products" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md">
        <div class="modal-content" id="content_modal">

            <!--modal header-->
            <div class="modal-header">
                <h5 modal-dialog-scrollable id="Products">{{x.prod_name}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!--modal body-->
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-12 text-center">
                            <p>{{x.prod_description}}</p>
                            <p id='feedback{{x.prod_id}}'></p>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col">
                            <h6>Quantity</h6>
                            <button type='button' class='btn btn-success btn-sm' onclick='addition{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-plus'></i></span>
                            </button> 

                            <span id='quantity{{x.prod_id}}'>1</span> 
                            
                            <button type='button' class='btn btn-danger btn-sm' onclick='substract{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-minus'></i></span>
                            </button><br><br>

                            <input type='hidden' id='number_plates{{x.prod_id}}' class='form-control'  value=1>
                            <input type='hidden' id='foodprice{{x.prod_id}}' class='form-control' value='{{x.prod_price}}'>

                            <button type='button' class='btn btn-success btn-sm float-end d-none' id='addtocart{{x.prod_id}}'>
                                Add into cart
                            </button>

                            <button type='button' class='btn btn-success btn-sm float-end' id='insertToCart{{x.prod_id}}'>
                                Add To Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!--modal footer-->
            <div class="modal-footer">
                <div class="row mb-2">
                    <label class='col-md-5'><b>Total(&#8358;)</b></label>
                    <div class='col-md-7'>
                        <input type='number' id='total{{x.prod_id}}' class='form-control' value='{{x.prod_price}}' style="border:none" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}


<!--Soups modal-->
{% for x in soup%}
<div class="modal fade" id="foodSoup{{x.prod_id}}" tabindex="-1" aria-labelledby="Products" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md">
        <div class="modal-content" id="content_modal">

            <!--modal header-->
            <div class="modal-header">
                <h5 modal-dialog-scrollable id="Products">{{x.prod_name}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!--modal body-->
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-12 text-center">
                            <p>{{x.prod_description}}</p>
                            <p id='feedback{{x.prod_id}}'></p>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col">
                            <h6>Quantity</h6>
                            <button type='button' class='btn btn-success btn-sm' onclick='addition{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-plus'></i></span>
                            </button> 

                            <span id='quantity{{x.prod_id}}'>1</span> 
                            
                            <button type='button' class='btn btn-danger btn-sm' onclick='substract{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-minus'></i></span>
                            </button><br><br>

                            <input type='hidden' id='number_plates{{x.prod_id}}' class='form-control'  value=1>
                            <input type='hidden' id='foodprice{{x.prod_id}}' class='form-control' value='{{x.prod_price}}'>

                            <button type='button' class='btn btn-success btn-sm float-end d-none' id='addtocart{{x.prod_id}}'>
                                Add into cart
                            </button>

                            <button type='button' class='btn btn-success btn-sm float-end' id='insertToCart{{x.prod_id}}'>
                                Add To Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!--modal footer-->
            <div class="modal-footer">
                <div class="row mb-2">
                    <label class='col-md-5'><b>Total(&#8358;)</b></label>
                    <div class='col-md-7'>
                        <input type='number' id='total{{x.prod_id}}' class='form-control' value='{{x.prod_price}}' style="border:none" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}


<!--Proteins modal-->
{% for x in protein%}
<div class="modal fade" id="foodProtein{{x.prod_id}}" tabindex="-1" aria-labelledby="Products" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md">
        <div class="modal-content" id="content_modal">

            <!--modal header-->
            <div class="modal-header">
                <h5 modal-dialog-scrollable id="Products">{{x.prod_name}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!--modal body-->
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-12 text-center">
                            <p>{{x.prod_description}}</p>
                            <p id='feedback{{x.prod_id}}'></p>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col">
                            <h6>Quantity</h6>
                            <button type='button' class='btn btn-success btn-sm' onclick='addition{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-plus'></i></span>
                            </button> 

                            <span id='quantity{{x.prod_id}}'>1</span> 
                            
                            <button type='button' class='btn btn-danger btn-sm' onclick='substract{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-minus'></i></span>
                            </button><br><br>

                            <input type='hidden' id='number_plates{{x.prod_id}}' class='form-control'  value=1>
                            <input type='hidden' id='foodprice{{x.prod_id}}' class='form-control' value='{{x.prod_price}}'>

                            <button type='button' class='btn btn-success btn-sm float-end d-none' id='addtocart{{x.prod_id}}'>
                                Add into cart
                            </button>

                            <button type='button' class='btn btn-success btn-sm float-end' id='insertToCart{{x.prod_id}}'>
                                Add To Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!--modal footer-->
            <div class="modal-footer">
                <div class="row mb-2">
                    <label class='col-md-5'><b>Total(&#8358;)</b></label>
                    <div class='col-md-7'>
                        <input type='number' id='total{{x.prod_id}}' class='form-control' value='{{x.prod_price}}' style="border:none" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}



<!--Desserts modal-->
{% for x in desserts%}
<div class="modal fade" id="foodDesserts{{x.prod_id}}" tabindex="-1" aria-labelledby="Products" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md">
        <div class="modal-content" id="content_modal">

            <!--modal header-->
            <div class="modal-header">
                <h5 modal-dialog-scrollable id="Products">{{x.prod_name}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!--modal body-->
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-12 text-center">
                            <p>{{x.prod_description}}</p>
                            <p id='feedback{{x.prod_id}}'></p>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col">
                            <h6>Quantity</h6>
                            <button type='button' class='btn btn-success btn-sm' onclick='addition{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-plus'></i></span>
                            </button> 

                            <span id='quantity{{x.prod_id}}'>1</span> 
                            
                            <button type='button' class='btn btn-danger btn-sm' onclick='substract{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-minus'></i></span>
                            </button><br><br>

                            <input type='hidden' id='number_plates{{x.prod_id}}' class='form-control'  value=1>
                            <input type='hidden' id='foodprice{{x.prod_id}}' class='form-control' value='{{x.prod_price}}'>

                            <button type='button' class='btn btn-success btn-sm float-end d-none' id='addtocart{{x.prod_id}}'>
                                Add into cart
                            </button>

                            <button type='button' class='btn btn-success btn-sm float-end' id='insertToCart{{x.prod_id}}'>
                                Add To Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!--modal footer-->
            <div class="modal-footer">
                <div class="row mb-2">
                    <label class='col-md-5'><b>Total(&#8358;)</b></label>
                    <div class='col-md-7'>
                        <input type='number' id='total{{x.prod_id}}' class='form-control' value='{{x.prod_price}}' style="border:none" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}


<!--Bread modal-->
{% for x in bread%}
<div class="modal fade" id="foodBread{{x.prod_id}}" tabindex="-1" aria-labelledby="Products" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md">
        <div class="modal-content" id="content_modal">

            <!--modal header-->
            <div class="modal-header">
                <h5 modal-dialog-scrollable id="Products">{{x.prod_name}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!--modal body-->
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-12 text-center">
                            <p>{{x.prod_description}}</p>
                            <p id='feedback{{x.prod_id}}'></p>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col">
                            <h6>Quantity</h6>
                            <button type='button' class='btn btn-success btn-sm' onclick='addition{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-plus'></i></span>
                            </button> 

                            <span id='quantity{{x.prod_id}}'>1</span> 
                            
                            <button type='button' class='btn btn-danger btn-sm' onclick='substract{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-minus'></i></span>
                            </button><br><br>

                            <input type='hidden' id='number_plates{{x.prod_id}}' class='form-control'  value=1>
                            <input type='hidden' id='foodprice{{x.prod_id}}' class='form-control' value='{{x.prod_price}}'>

                            <button type='button' class='btn btn-success btn-sm float-end d-none' id='addtocart{{x.prod_id}}'>
                                Add into cart
                            </button>

                            <button type='button' class='btn btn-success btn-sm float-end' id='insertToCart{{x.prod_id}}'>
                                Add To Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!--modal footer-->
            <div class="modal-footer">
                <div class="row mb-2">
                    <label class='col-md-5'><b>Total(&#8358;)</b></label>
                    <div class='col-md-7'>
                        <input type='number' id='total{{x.prod_id}}' class='form-control' value='{{x.prod_price}}' style="border:none" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}


<!--Salad modal-->
{% for x in salad%}
<div class="modal fade" id="foodSalad{{x.prod_id}}" tabindex="-1" aria-labelledby="Products" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md">
        <div class="modal-content" id="content_modal">

            <!--modal header-->
            <div class="modal-header">
                <h5 modal-dialog-scrollable id="Products">{{x.prod_name}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!--modal body-->
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-12 text-center">
                            <p>{{x.prod_description}}</p>
                            <p id='feedback{{x.prod_id}}'></p>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col">
                            <h6>Quantity</h6>
                            <button type='button' class='btn btn-success btn-sm' onclick='addition{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-plus'></i></span>
                            </button> 

                            <span id='quantity{{x.prod_id}}'>1</span> 
                            
                            <button type='button' class='btn btn-danger btn-sm' onclick='substract{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-minus'></i></span>
                            </button><br><br>

                            <input type='hidden' id='number_plates{{x.prod_id}}' class='form-control'  value=1>
                            <input type='hidden' id='foodprice{{x.prod_id}}' class='form-control' value='{{x.prod_price}}'>

                            <button type='button' class='btn btn-success btn-sm float-end d-none' id='addtocart{{x.prod_id}}'>
                                Add into cart
                            </button>

                            <button type='button' class='btn btn-success btn-sm float-end' id='insertToCart{{x.prod_id}}'>
                                Add To Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!--modal footer-->
            <div class="modal-footer">
                <div class="row mb-2">
                    <label class='col-md-5'><b>Total(&#8358;)</b></label>
                    <div class='col-md-7'>
                        <input type='number' id='total{{x.prod_id}}' class='form-control' value='{{x.prod_price}}' style="border:none" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}


<!--Drinks modal-->
{% for x in drink%}
<div class="modal fade" id="foodDrinks{{x.prod_id}}" tabindex="-1" aria-labelledby="Products" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md">
        <div class="modal-content" id="content_modal">

            <!--modal header-->
            <div class="modal-header">
                <h5 modal-dialog-scrollable id="Products">{{x.prod_name}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!--modal body-->
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-12 text-center">
                            <p>{{x.prod_description}}</p>
                            <p id='feedback{{x.prod_id}}'></p>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col">
                            <h6>Quantity</h6>
                            <button type='button' class='btn btn-success btn-sm' onclick='addition{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-plus'></i></span>
                            </button> 

                            <span id='quantity{{x.prod_id}}'>1</span> 
                            
                            <button type='button' class='btn btn-danger btn-sm' onclick='substract{{x.prod_id}}()'>
                                <span><i class='fa-solid fa-minus'></i></span>
                            </button><br><br>

                            <input type='hidden' id='number_plates{{x.prod_id}}' class='form-control'  value=1>
                            <input type='hidden' id='foodprice{{x.prod_id}}' class='form-control' value='{{x.prod_price}}'>

                            <button type='button' class='btn btn-success btn-sm float-end d-none' id='addtocart{{x.prod_id}}'>
                                Add into cart
                            </button>

                            <button type='button' class='btn btn-success btn-sm float-end' id='insertToCart{{x.prod_id}}'>
                                Add To Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!--modal footer-->
            <div class="modal-footer">
                <div class="row mb-2">
                    <label class='col-md-5'><b>Total(&#8358;)</b></label>
                    <div class='col-md-7'>
                        <input type='number' id='total{{x.prod_id}}' class='form-control' value='{{x.prod_price}}' style="border:none" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}
{% endblock foodProductsModal %}









<!--This is where functions controlling purchases-->

{%block scripts%}

    <!--maindish functions-->
    {% for i in rest_maindish%}
    <script type='text/javascript'>

        qty{{i.prod_id}}=1;

        function addition{{i.prod_id}}(){
            ++qty{{i.prod_id}};
            $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
            $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
            $('#addtocart{{i.prod_id}}').click();
        } 
        

        function substract{{i.prod_id}}(){
            if(qty{{i.prod_id}}>1){
                qty{{i.prod_id}}--;
                $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
                $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
                $('#addtocart{{i.prod_id}}').click();
            }
            
        } 
        

        $('#addtocart{{i.prod_id}}').click(function(){
            qty_requested=$('#number_plates{{i.prod_id}}').val();
            foodamt=$('#foodprice{{i.prod_id}}').val();
            newamt=qty_requested*foodamt
            $('#total{{i.prod_id}}').val(newamt);
        })

        $('#insertToCart{{i.prod_id}}').click(function(){
            cart_temp_id={{session.get("user_cart_id")}};
            restaurant= {{i.prod_rest}};
            amount_payable = $('#total{{i.prod_id}}').val();
            product= {{i.prod_id}};
            product_qty=$('#number_plates{{i.prod_id}}').val();

            var data2send={'temp_id':cart_temp_id, 'eatry':restaurant, 'product':product, 'quantity':product_qty,'amount':amount_payable}


            $.ajax({
                url:"/user/temporarycart/",
                data:data2send,
                dataType:"text",
                type:"get",
                beforeSend:function(){},
                success:function(rsp){
                    $('#feedback{{i.prod_id}}').addClass('alert alert-success');
                    $('#feedback{{i.prod_id}}').text(rsp);
                    qty{{i.prod_id}}=1;
                    $('#number_plates{{i.prod_id}}').val(1)
                    $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}})

                    //this then refreshes the total of the modal
                    qty_requested=$('#number_plates{{i.prod_id}}').val();
                    foodamt=$('#foodprice{{i.prod_id}}').val();
                    newamt=qty_requested*foodamt
                    $('#total{{i.prod_id}}').val(newamt);
                },  
                error:function(errormessage){
                    console.log(errormessage)
                }
            })

        })
    </script>
    {% endfor %}


    <!--swallow functions-->
    {% for i in swallow%}
    <script type='text/javascript'>

        qty{{i.prod_id}}=1;
        
        function addition{{i.prod_id}}(){
            ++qty{{i.prod_id}};
            $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
            $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
            $('#addtocart{{i.prod_id}}').click();
        } 
        

        function substract{{i.prod_id}}(){
            if(qty{{i.prod_id}}>1){
                qty{{i.prod_id}}--;
                $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
                $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
                $('#addtocart{{i.prod_id}}').click();
            }
            
        } 
        

        $('#addtocart{{i.prod_id}}').click(function(){
            qty_requested=$('#number_plates{{i.prod_id}}').val();
            foodamt=$('#foodprice{{i.prod_id}}').val();
            newamt=qty_requested*foodamt
            $('#total{{i.prod_id}}').val(newamt);
        })

        $('#insertToCart{{i.prod_id}}').click(function(){
            cart_temp_id={{session.get("user_cart_id")}};
            restaurant= {{i.prod_rest}};
            amount_payable = $('#total{{i.prod_id}}').val();
            product= {{i.prod_id}};
            product_qty=$('#number_plates{{i.prod_id}}').val();

            var data2send={'temp_id':cart_temp_id, 'eatry':restaurant, 'product':product, 'quantity':product_qty,'amount':amount_payable}


            $.ajax({
                url:"/user/temporarycart/",
                data:data2send,
                dataType:"text",
                type:"get",
                beforeSend:function(){},
                success:function(rsp){
                    $('#feedback{{i.prod_id}}').addClass('alert alert-success');
                    $('#feedback{{i.prod_id}}').text(rsp);
                    qty{{i.prod_id}}=1;
                    $('#number_plates{{i.prod_id}}').val(1)
                    $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}})

                    //this then refreshes the total of the modal
                    qty_requested=$('#number_plates{{i.prod_id}}').val();
                    foodamt=$('#foodprice{{i.prod_id}}').val();
                    newamt=qty_requested*foodamt
                    $('#total{{i.prod_id}}').val(newamt);
                },  
                error:function(errormessage){
                    console.log(errormessage)
                }
            })

        })
    </script>
    {% endfor %}


    <!--soup functions-->
    {% for i in soup%}
    <script type='text/javascript'>

        qty{{i.prod_id}}=1;
        
        function addition{{i.prod_id}}(){
            ++qty{{i.prod_id}};
            $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
            $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
            $('#addtocart{{i.prod_id}}').click();
        } 
        

        function substract{{i.prod_id}}(){
            if(qty{{i.prod_id}}>1){
                qty{{i.prod_id}}--;
                $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
                $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
                $('#addtocart{{i.prod_id}}').click();
            }
            
        } 
        

        $('#addtocart{{i.prod_id}}').click(function(){
            qty_requested=$('#number_plates{{i.prod_id}}').val();
            foodamt=$('#foodprice{{i.prod_id}}').val();
            newamt=qty_requested*foodamt
            $('#total{{i.prod_id}}').val(newamt);
        })

        $('#insertToCart{{i.prod_id}}').click(function(){
            cart_temp_id={{session.get("user_cart_id")}};
            restaurant= {{i.prod_rest}};
            amount_payable = $('#total{{i.prod_id}}').val();
            product= {{i.prod_id}};
            product_qty=$('#number_plates{{i.prod_id}}').val();

            var data2send={'temp_id':cart_temp_id, 'eatry':restaurant, 'product':product, 'quantity':product_qty,'amount':amount_payable}


            $.ajax({
                url:"/user/temporarycart/",
                data:data2send,
                dataType:"text",
                type:"get",
                beforeSend:function(){},
                success:function(rsp){
                    $('#feedback{{i.prod_id}}').addClass('alert alert-success');
                    $('#feedback{{i.prod_id}}').text(rsp);
                    qty{{i.prod_id}}=1;
                    $('#number_plates{{i.prod_id}}').val(1)
                    $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}})

                    //this then refreshes the total of the modal
                    qty_requested=$('#number_plates{{i.prod_id}}').val();
                    foodamt=$('#foodprice{{i.prod_id}}').val();
                    newamt=qty_requested*foodamt
                    $('#total{{i.prod_id}}').val(newamt);
                },  
                error:function(errormessage){
                    console.log(errormessage)
                }
            })

        })
    </script>
    {% endfor %}


    <!--protein functions-->
    {% for i in protein%}
    <script type='text/javascript'>

        qty{{i.prod_id}}=1;
        
        function addition{{i.prod_id}}(){
            ++qty{{i.prod_id}};
            $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
            $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
            $('#addtocart{{i.prod_id}}').click();
        } 
        

        function substract{{i.prod_id}}(){
            if(qty{{i.prod_id}}>1){
                qty{{i.prod_id}}--;
                $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
                $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
                $('#addtocart{{i.prod_id}}').click();
            }
            
        } 
        

        $('#addtocart{{i.prod_id}}').click(function(){
            qty_requested=$('#number_plates{{i.prod_id}}').val();
            foodamt=$('#foodprice{{i.prod_id}}').val();
            newamt=qty_requested*foodamt
            $('#total{{i.prod_id}}').val(newamt);
        })

        $('#insertToCart{{i.prod_id}}').click(function(){
            cart_temp_id={{session.get("user_cart_id")}};
            restaurant= {{i.prod_rest}};
            amount_payable = $('#total{{i.prod_id}}').val();
            product= {{i.prod_id}};
            product_qty=$('#number_plates{{i.prod_id}}').val();

            var data2send={'temp_id':cart_temp_id, 'eatry':restaurant, 'product':product, 'quantity':product_qty,'amount':amount_payable}


            $.ajax({
                url:"/user/temporarycart/",
                data:data2send,
                dataType:"text",
                type:"get",
                beforeSend:function(){},
                success:function(rsp){
                    $('#feedback{{i.prod_id}}').addClass('alert alert-success');
                    $('#feedback{{i.prod_id}}').text(rsp);
                    qty{{i.prod_id}}=1;
                    $('#number_plates{{i.prod_id}}').val(1)
                    $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}})

                    //this then refreshes the total of the modal
                    qty_requested=$('#number_plates{{i.prod_id}}').val();
                    foodamt=$('#foodprice{{i.prod_id}}').val();
                    newamt=qty_requested*foodamt
                    $('#total{{i.prod_id}}').val(newamt);
                },  
                error:function(errormessage){
                    console.log(errormessage)
                }
            })

        })
    </script>
    {% endfor %}


    <!--desserts_and_pastries functions-->
    {% for i in desserts%}
    <script type='text/javascript'>

        qty{{i.prod_id}}=1;
        
        function addition{{i.prod_id}}(){
            ++qty{{i.prod_id}};
            $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
            $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
            $('#addtocart{{i.prod_id}}').click();
        } 
        

        function substract{{i.prod_id}}(){
            if(qty{{i.prod_id}}>1){
                qty{{i.prod_id}}--;
                $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
                $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
                $('#addtocart{{i.prod_id}}').click();
            }
            
        } 
        

        $('#addtocart{{i.prod_id}}').click(function(){
            qty_requested=$('#number_plates{{i.prod_id}}').val();
            foodamt=$('#foodprice{{i.prod_id}}').val();
            newamt=qty_requested*foodamt
            $('#total{{i.prod_id}}').val(newamt);
        })

        $('#insertToCart{{i.prod_id}}').click(function(){
            cart_temp_id={{session.get("user_cart_id")}};
            restaurant= {{i.prod_rest}};
            amount_payable = $('#total{{i.prod_id}}').val();
            product= {{i.prod_id}};
            product_qty=$('#number_plates{{i.prod_id}}').val();

            var data2send={'temp_id':cart_temp_id, 'eatry':restaurant, 'product':product, 'quantity':product_qty,'amount':amount_payable}


            $.ajax({
                url:"/user/temporarycart/",
                data:data2send,
                dataType:"text",
                type:"get",
                beforeSend:function(){},
                success:function(rsp){
                    $('#feedback{{i.prod_id}}').addClass('alert alert-success');
                    $('#feedback{{i.prod_id}}').text(rsp);
                    qty{{i.prod_id}}=1;
                    $('#number_plates{{i.prod_id}}').val(1)
                    $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}})

                    //this then refreshes the total of the modal
                    qty_requested=$('#number_plates{{i.prod_id}}').val();
                    foodamt=$('#foodprice{{i.prod_id}}').val();
                    newamt=qty_requested*foodamt
                    $('#total{{i.prod_id}}').val(newamt);
                },  
                error:function(errormessage){
                    console.log(errormessage)
                }
            })

        })
    </script>
    {% endfor %}

    <!--Bread functions-->
    {% for i in bread%}
    <script type='text/javascript'>

        qty{{i.prod_id}}=1;
        
        function addition{{i.prod_id}}(){
            ++qty{{i.prod_id}};
            $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
            $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
            $('#addtocart{{i.prod_id}}').click();
        } 
        

        function substract{{i.prod_id}}(){
            if(qty{{i.prod_id}}>1){
                qty{{i.prod_id}}--;
                $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
                $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
                $('#addtocart{{i.prod_id}}').click();
            }
            
        } 
        

        $('#addtocart{{i.prod_id}}').click(function(){
            qty_requested=$('#number_plates{{i.prod_id}}').val();
            foodamt=$('#foodprice{{i.prod_id}}').val();
            newamt=qty_requested*foodamt
            $('#total{{i.prod_id}}').val(newamt);
        })

        $('#insertToCart{{i.prod_id}}').click(function(){
            cart_temp_id={{session.get("user_cart_id")}};
            restaurant= {{i.prod_rest}};
            amount_payable = $('#total{{i.prod_id}}').val();
            product= {{i.prod_id}};
            product_qty=$('#number_plates{{i.prod_id}}').val();

            var data2send={'temp_id':cart_temp_id, 'eatry':restaurant, 'product':product, 'quantity':product_qty,'amount':amount_payable}


            $.ajax({
                url:"/user/temporarycart/",
                data:data2send,
                dataType:"text",
                type:"get",
                beforeSend:function(){},
                success:function(rsp){
                    $('#feedback{{i.prod_id}}').addClass('alert alert-success');
                    $('#feedback{{i.prod_id}}').text(rsp);
                    qty{{i.prod_id}}=1;
                    $('#number_plates{{i.prod_id}}').val(1)
                    $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}})

                    //this then refreshes the total of the modal
                    qty_requested=$('#number_plates{{i.prod_id}}').val();
                    foodamt=$('#foodprice{{i.prod_id}}').val();
                    newamt=qty_requested*foodamt
                    $('#total{{i.prod_id}}').val(newamt);
                },  
                error:function(errormessage){
                    console.log(errormessage)
                }
            })

        })
    </script>
    {% endfor %}


    <!--Salad functions-->
    {% for i in salad%}
    <script type='text/javascript'>

        qty{{i.prod_id}}=1;
        
        function addition{{i.prod_id}}(){
            ++qty{{i.prod_id}};
            $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
            $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
            $('#addtocart{{i.prod_id}}').click();
        } 
        

        function substract{{i.prod_id}}(){
            if(qty{{i.prod_id}}>1){
                qty{{i.prod_id}}--;
                $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
                $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
                $('#addtocart{{i.prod_id}}').click();
            }
            
        } 
        

        $('#addtocart{{i.prod_id}}').click(function(){
            qty_requested=$('#number_plates{{i.prod_id}}').val();
            foodamt=$('#foodprice{{i.prod_id}}').val();
            newamt=qty_requested*foodamt
            $('#total{{i.prod_id}}').val(newamt);
        })

        $('#insertToCart{{i.prod_id}}').click(function(){
            cart_temp_id={{session.get("user_cart_id")}};
            restaurant= {{i.prod_rest}};
            amount_payable = $('#total{{i.prod_id}}').val();
            product= {{i.prod_id}};
            product_qty=$('#number_plates{{i.prod_id}}').val();

            var data2send={'temp_id':cart_temp_id, 'eatry':restaurant, 'product':product, 'quantity':product_qty,'amount':amount_payable}


            $.ajax({
                url:"/user/temporarycart/",
                data:data2send,
                dataType:"text",
                type:"get",
                beforeSend:function(){},
                success:function(rsp){
                    $('#feedback{{i.prod_id}}').addClass('alert alert-success');
                    $('#feedback{{i.prod_id}}').text(rsp);
                    qty{{i.prod_id}}=1;
                    $('#number_plates{{i.prod_id}}').val(1)
                    $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}})

                    //this then refreshes the total of the modal
                    qty_requested=$('#number_plates{{i.prod_id}}').val();
                    foodamt=$('#foodprice{{i.prod_id}}').val();
                    newamt=qty_requested*foodamt
                    $('#total{{i.prod_id}}').val(newamt);
                },  
                error:function(errormessage){
                    console.log(errormessage)
                }
            })

        })
    </script>
    {% endfor %}

    <!--Drink functions-->
    {% for i in drink%}
    <script type='text/javascript'>

        qty{{i.prod_id}}=1;
        
        function addition{{i.prod_id}}(){
            ++qty{{i.prod_id}};
            $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
            $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
            $('#addtocart{{i.prod_id}}').click();
        } 
        

        function substract{{i.prod_id}}(){
            if(qty{{i.prod_id}}>1){
                qty{{i.prod_id}}--;
                $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}});
                $('#number_plates{{i.prod_id}}').val(qty{{i.prod_id}});
                $('#addtocart{{i.prod_id}}').click();
            }
            
        } 
        

        $('#addtocart{{i.prod_id}}').click(function(){
            qty_requested=$('#number_plates{{i.prod_id}}').val();
            foodamt=$('#foodprice{{i.prod_id}}').val();
            newamt=qty_requested*foodamt
            $('#total{{i.prod_id}}').val(newamt);
        })

        $('#insertToCart{{i.prod_id}}').click(function(){
            cart_temp_id={{session.get("user_cart_id")}};
            restaurant= {{i.prod_rest}};
            amount_payable = $('#total{{i.prod_id}}').val();
            product= {{i.prod_id}};
            product_qty=$('#number_plates{{i.prod_id}}').val();

            var data2send={'temp_id':cart_temp_id, 'eatry':restaurant, 'product':product, 'quantity':product_qty,'amount':amount_payable}


            $.ajax({
                url:"/user/temporarycart/",
                data:data2send,
                dataType:"text",
                type:"get",
                beforeSend:function(){},
                success:function(rsp){
                    $('#feedback{{i.prod_id}}').addClass('alert alert-success');
                    $('#feedback{{i.prod_id}}').text(rsp);
                    qty{{i.prod_id}}=1;
                    $('#number_plates{{i.prod_id}}').val(1)
                    $('#quantity{{i.prod_id}}').text(qty{{i.prod_id}})

                    //this then refreshes the total of the modal
                    qty_requested=$('#number_plates{{i.prod_id}}').val();
                    foodamt=$('#foodprice{{i.prod_id}}').val();
                    newamt=qty_requested*foodamt
                    $('#total{{i.prod_id}}').val(newamt);
                },  
                error:function(errormessage){
                    console.log(errormessage)
                }
            })

        })
    </script>
    {% endfor %}




    <!--This controls the modal delete ajax-->
    {% for c in usercartdeets %}
        <script type='text/javascript'>
            $('#removeitem{{c.temp_cart_id}}').click(function(){
                discardID=$('#discard{{c.temp_cart_id}}').val();
                var data2send={'trash':discardID}
                $.ajax({
                    url:"/user/removeitem/",
                    data:data2send,
                    dataType:"text",
                    type:"get",
                    beforeSend:function(){},
                    success:function(rsp){
                        $('#deleteitemFeedback').addClass('alert alert-success')
                        $('#deleteitemFeedback').text(rsp)
                    },  
                    error:function(errormessage){
                        console.log(errormessage)
                    }
                })
            })
        </script>
    {% endfor %}


    <script type='text/javascript'>
        // empty temporary cart
        $('#btnEmptyCart').click(function(){
            cartuseriD={{session.get('user_cart_id')}}

            var data2send={'emptycartID':cartuseriD}


            $.ajax({
                url:"/user/emptytemporarycart/",
                data:data2send,
                dataType:"text",
                type:"get",
                beforeSend:function(){},
                success:function(rsp){
                    $('#emptyCartFeedback').addClass('alert alert-success')
                    $('#emptyCartFeedback').text(rsp)
                },  
                error:function(errormessage){
                    console.log(errormessage)
                }
            })

        })
    </script>


    <script type='text/javascript'>
        // empty temporary cart
        $(document).ready(function(){
            
        })
    </script>
{%endblock scripts%}




